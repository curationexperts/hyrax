function trackGooglePageView() {
  window._gaq.push(['_trackPageview']);
}

function trackGoogleEvents() {
  $('span.analytics-event').each(function(){
    var eventSpan = $(this)
    window._gaq.push(['_trackEvent', eventSpan.data('category'), eventSpan.data('action'), eventSpan.data('name')]);
  })
}

if (typeof Turbolinks !== 'undefined') {
  $(document).on('turbolinks:load', function() {
    trackGooglePageView()
    trackGoogleEvents()
  })
} else {
  $(document).on('ready', function() {
    trackGooglePageView()
    trackGoogleEvents()
  })
}

$(document).on('click', '#file_download', function(e) {
  window._gaq.push(['_trackEvent', 'Files', 'Downloaded', $(this).data('label')]);
  window._gaq.push(['_trackEvent', 'Works', 'Downloads', $(this).data('work-id')]);
  collection_ids.forEach(function (collection) {
    window._gaq.push(['_trackEvent', 'Collections', 'Downloads', collection]);
    window._gaq.push(['_trackEvent', 'Work in Collection', 'Downloads', collection]);
  });
});
